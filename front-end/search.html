<!DOCTYPE HTML>
<html>
	<head>
		<title>Search - Car Dealership by HTML5 UP</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body class="left-sidebar is-preload">
		<div id="page-wrapper">

			<!-- Header Wrapper -->
				<div id="header-wrapper">
					<div class="container">

						<!-- Header -->
							<header id="header">
								<div class="inner">

									<!-- Logo -->
										<h1><a href="index.html" id="logo">Car Dealership</a></h1>

									<!-- Nav -->
										<nav id="nav">
											<ul>
												<li><a href="index.html">Home</a></li>
												<li class="current_page_item"><a href="left-sidebar.html">Search</a></li>
												<li><a href="cart.html">Cart</a></li>
												
											</ul>
										</nav>

								</div>
							</header>

					</div>
				</div>

				<div id="main-wrapper">
				<div class="wrapper style3">
					<div class="inner">
						<div class="container">
							<div class="row">
								<section class="box article-list">																				
									<h2>Search</h2>
									<div id="posts">
								
										<button id="retrievePosts" onclick="retrievePosts()">Search Inventory</button>
									</div>
								
									<div id="archive"> 
									</div>
									<article class="box excerpt">
											<div class="container">
												
												<label for="make"><b>Make</b></label>
												<input type="text" placeholder="Enter Make" name="make" required>
										  
												<label for="model"><b>Model</b></label>
												<input type="text" placeholder="Enter Model" name="model" required>

												<label for="color"><b>Color</b></label>
												<input type="text" placeholder="Enter Color" name="color" required>
										  
												<label for="min-price"><b>Min Price</b></label>
												<input type="text" placeholder="Enter min-price" name="min-color" required>

												<label for="max-price"><b>max Price</b></label>
												<input type="text" placeholder="Enter max-price" name="max-color" required>


												<button type="submit">Search</button>
												<label>
												  <input type="checkbox" checked="checked" name="remember"> 
												</label>
											  </div>
										</article>
								</section>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
				<div id="main-wrapper">
				<div class="wrapper style3">
					<div class="inner">
						<div class="container">
							<div class="row">
								<section class="box article-list">																				
									<h2>Results</h2>
										<article class="box excerpt">
											<a href="#" class="image left"><img src="images/pic04.jpg" alt="" /></a>
											<div>
												<header>
													<span class="date"></span>
													<h3><a href="#">Honda Civic Hatchback </a></h3>
												</header>
												<p>Color: Grey</p>
												<p>Year: 2021</p>
												<p>Price: 25000</p>
												<p>VIN: 1234567890</p>
												<a href="index.html">Add to cart</a>
											</div>
										</article>
									
										
								</section>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
			<script>
				var archivedPost = [];
				window.onload = function(){
					var session =window.sessionStorage;
					archivedPost = JSON.parse(sessionStorage.getItem('archivedPost'))
					if(archivedPost == null){
						archivedPost = [];
					}
					loadArchive();
				}
				function retrievePosts(){
					fetch('https://jsonplaceholder.typicode.com/posts/?_limit=10')
					.then(response => response.json())
					.then(posts => {
						posts.forEach(post => {
							//console.log(post);
							let div = document.createElement("div");
							div.setAttribute("class", "post");
							let div_h3 = document.createElement("h3");
							div_h3.setAttribute("class", "postTitle");
							let div_p = document.createElement("p");
							div_p.setAttribute("class", "postTitle")
							div.setAttribute("id", post["id"]);
							div_h3.innerText = post["title"];
							div_p.innerText = post["body"];
							div.append(div_h3, div_p);
		
							let button2 = document.createElement("button");
							button2.innerText = "Add to Cart"
							button2.addEventListener("click", function(){
								if(!archivedPost.includes(post)){
									archivedPost.push(post);
									window.sessionStorage.setItem("archivedPost", 
											JSON.stringify(archivedPost));
									loadArchive();
								}
							})
							div.append(button2);
		
							let doc_posts = document.getElementById("posts");
							doc_posts.appendChild(div);
						});
					})
					.catch(error => console.log(error));
				}
		
				function loadArchive(){
					console.log("Results")
					let archive = document.getElementById("archive");
					while (archive.childNodes.length > 1) {
						archive.removeChild(archive.lastChild);
					}
					archivedPost.forEach(post =>{
						let archive_div = document.createElement("div");
						archive_div.setAttribute("class", "archiveEntry");
						let archive_div_h4 = document.createElement("h4");
						let archive_div_p = document.createElement("p");
						archive_div_h4.setAttribute("class", "title");
						archive_div_p.setAttribute("class", "author");
						archive_div_h4.innerText = post["title"];
						archive_div_p.innerText = post["userId"];
						archive_div.append(archive_div_h4, archive_div_p)
						archive.append(archive_div);
						
						let deleteButton = document.createElement("button");
						deleteButton.addEventListener("click", function(){
							var index = archivedPost.indexOf(post);
							if(index > -1){
								archivedPost.splice(index, 1);
							}
							window.sessionStorage.setItem("archivedPost", 
											JSON.stringify(archivedPost));
							loadArchive();
						})
						deleteButton.innerText = "Remove from Cart";
		
						archive_div.append(deleteButton);
					});
				}
		
			</script>
	</body>
</html>