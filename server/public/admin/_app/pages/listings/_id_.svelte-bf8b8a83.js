import{S as W,i as X,s as Y,D as Z,j as G,m as R,o as z,x as U,u as P,v as K,k as D,e as E,t as $,n as V,c as T,a as I,g as B,d as C,b as g,f as S,E as o,J as A,F as x,G as ee,H as te,w as se,L as H,M as ae,r as le}from"../../chunks/vendor-786b6522.js";import{C as ne}from"../../chunks/customTable-d965812e.js";import{M as oe}from"../../chunks/modal-736927c9.js";function Q(l){let e,s;return e=new ne({props:{headers:l[5],entries:l[0],resource:"cars",clickable:!1}}),{c(){G(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,v){z(e,t,v),s=!0},p(t,v){const f={};v&1&&(f.entries=t[0]),e.$set(f)},i(t){s||(U(e.$$.fragment,t),s=!0)},o(t){P(e.$$.fragment,t),s=!1},d(t){K(e,t)}}}function re(l){let e,s,t,v,f,w,k,c,N,M,d,u,_,j,r,m,O;return{c(){e=E("div"),s=E("button"),t=$("Cancel"),v=D(),f=E("h1"),w=$("New Appointment"),k=D(),c=E("button"),N=$("Done"),d=D(),u=E("form"),_=E("input"),j=D(),r=E("input"),this.h()},l(i){e=T(i,"DIV",{class:!0});var p=I(e);s=T(p,"BUTTON",{class:!0});var b=I(s);t=B(b,"Cancel"),b.forEach(C),v=V(p),f=T(p,"H1",{class:!0});var n=I(f);w=B(n,"New Appointment"),n.forEach(C),k=V(p),c=T(p,"BUTTON",{class:!0});var a=I(c);N=B(a,"Done"),a.forEach(C),p.forEach(C),d=V(i),u=T(i,"FORM",{class:!0});var h=I(u);_=T(h,"INPUT",{type:!0,placeholder:!0,maxlength:!0,class:!0}),j=V(h),r=T(h,"INPUT",{type:!0,placeholder:!0,class:!0}),h.forEach(C),this.h()},h(){g(s,"class","cancel svelte-456ac7"),g(f,"class","svelte-456ac7"),g(c,"class","done svelte-456ac7"),c.disabled=M=!l[4],g(e,"class","header svelte-456ac7"),g(_,"type","text"),g(_,"placeholder","Vin"),g(_,"maxlength","16"),g(_,"class","svelte-456ac7"),g(r,"type","text"),g(r,"placeholder","Color"),g(r,"class","svelte-456ac7"),g(u,"class","svelte-456ac7")},m(i,p){S(i,e,p),o(e,s),o(s,t),o(e,v),o(e,f),o(f,w),o(e,k),o(e,c),o(c,N),S(i,d,p),S(i,u,p),o(u,_),H(_,l[1]),o(u,j),o(u,r),H(r,l[2]),m||(O=[A(s,"click",l[6]),A(c,"click",l[7]),A(_,"input",l[10]),A(r,"input",l[11])],m=!0)},p(i,p){p&16&&M!==(M=!i[4])&&(c.disabled=M),p&2&&_.value!==i[1]&&H(_,i[1]),p&4&&r.value!==i[2]&&H(r,i[2])},d(i){i&&C(e),i&&C(d),i&&C(u),m=!1,ae(O)}}}function ie(l){let e,s,t,v,f,w,k,c,N,M,d,u,_,j,r,m,O,i;const p=l[9].default,b=Z(p,l,l[12],null);let n=l[0]&&Q(l);return r=new oe({props:{showModal:l[3],$$slots:{default:[re]},$$scope:{ctx:l}}}),{c(){b&&b.c(),e=D(),s=E("div"),t=E("main"),v=E("h1"),f=$("Cars"),w=D(),k=E("div"),c=E("p"),N=$("List of all currentlycars belonging to this listing"),M=D(),d=E("button"),u=$("Create new car"),_=D(),n&&n.c(),j=D(),G(r.$$.fragment),this.h()},l(a){b&&b.l(a),e=V(a),s=T(a,"DIV",{class:!0});var h=I(s);t=T(h,"MAIN",{class:!0});var y=I(t);v=T(y,"H1",{});var L=I(v);f=B(L,"Cars"),L.forEach(C),w=V(y),k=T(y,"DIV",{class:!0});var F=I(k);c=T(F,"P",{class:!0});var J=I(c);N=B(J,"List of all currentlycars belonging to this listing"),J.forEach(C),M=V(F),d=T(F,"BUTTON",{class:!0});var q=I(d);u=B(q,"Create new car"),q.forEach(C),F.forEach(C),_=V(y),n&&n.l(y),j=V(y),R(r.$$.fragment,y),y.forEach(C),h.forEach(C),this.h()},h(){g(c,"class","svelte-456ac7"),g(d,"class","svelte-456ac7"),g(k,"class","sub svelte-456ac7"),g(t,"class","svelte-456ac7"),g(s,"class","wrapper svelte-456ac7")},m(a,h){b&&b.m(a,h),S(a,e,h),S(a,s,h),o(s,t),o(t,v),o(v,f),o(t,w),o(t,k),o(k,c),o(c,N),o(k,M),o(k,d),o(d,u),o(t,_),n&&n.m(t,null),o(t,j),z(r,t,null),m=!0,O||(i=A(d,"click",l[6]),O=!0)},p(a,[h]){b&&b.p&&(!m||h&4096)&&x(b,p,a,a[12],m?te(p,a[12],h,null):ee(a[12]),null),a[0]?n?(n.p(a,h),h&1&&U(n,1)):(n=Q(a),n.c(),U(n,1),n.m(t,j)):n&&(le(),P(n,1,1,()=>{n=null}),se());const y={};h&8&&(y.showModal=a[3]),h&4118&&(y.$$scope={dirty:h,ctx:a}),r.$set(y)},i(a){m||(U(b,a),U(n),U(r.$$.fragment,a),m=!0)},o(a){P(b,a),P(n),P(r.$$.fragment,a),m=!1},d(a){b&&b.d(a),a&&C(e),a&&C(s),n&&n.d(),K(r),O=!1,i()}}}async function _e({page:l}){const e=l.params.id;var s=`http://localhost:8080/listings/${e}/cars`,t=await fetch(s),v=await t.json();return{props:{cars:v.map(w=>({Vin:w.vin,Color:w.color,Id:w.stock_id})),listing_id:e}}}function ce(l,e,s){let{$$slots:t={},$$scope:v}=e,{cars:f}=e,{listing_id:w}=e,k=["Vin","Color","Id"],c=!1;const N=()=>{s(3,c=!c)},M=async function(){const m="http://localhost:8080/cars",O={vin:d,color:u,listing_id:w},b=(await(await fetch(m,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(O)})).json()).insertId;s(0,f=[...f,{Vin:d,Color:u,Id:b}]),N()};let d,u,_=!1;function j(){d=this.value,s(1,d)}function r(){u=this.value,s(2,u)}return l.$$set=m=>{"cars"in m&&s(0,f=m.cars),"listing_id"in m&&s(8,w=m.listing_id),"$$scope"in m&&s(12,v=m.$$scope)},l.$$.update=()=>{l.$$.dirty&6&&(d&&u?s(4,_=!0):s(4,_=!1))},[f,d,u,c,_,k,N,M,w,t,j,r,v]}class me extends W{constructor(e){super();X(this,e,ce,ie,Y,{cars:0,listing_id:8})}}export{me as default,_e as load};
